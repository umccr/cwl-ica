type: record
name: dragen-wgts-rna-options-variant-calling-stage
fields:
  # Data inputs
  sequence_data:
    label: sequence data
    doc: |
      The sequence data
    type:
      - {"$import": "../../../schemas/fastq-list-rows-input/2.0.0/fastq-list-rows-input__2.0.0.yaml#fastq-list-rows-input"}
      - {"$import": "../../../schemas/bam-input/1.0.0/bam-input__1.0.0.yaml#bam-input"}
      - {"$import": "../../../schemas/cram-input/1.0.0/cram-input__1.0.0.yaml#cram-input"}
  ref_tar:
    label: ref tar
    doc: |
      Specifies the tarball containing the reference hash table. If the reference is not already loaded into the DRAGEN card, the option automatically loads the reference.
      Note that the actual dragen command is '--ref-dir' but we first need to download and extract the tarball.
    type: File

  # Ora Reference for ora reference inputs
  ora_reference:
    label: ora reference
    doc: |
      Specifies the ora reference. The ora reference is used to annotate the variants.
      Note that the actual dragen command is '--ora-reference' but we first need to download and extract the tarball.
    type: File

  # Stage options (we have to duplicate this across all dragen stages at the top level)
  output_directory:
    label: output directory
    doc: |
      Specifies the output directory.
    type: string
  output_file_prefix:
    label: output file prefix
    doc: |
      Outputs file name prefix to use for all files generated by the pipeline.
    type: string
  lic_instance_id_location:
    label: lic instance id location
    doc: |
      Use this option to override the default cloud instance ID location
    type:
      - "null"
      - string
      - File

  # Annotation file
  annotation_file:
    label: annotation file
    doc: |
      Specifies the annotation file. The annotation file is used to annotate the variants.
    type:
      - "null"
      - File

  # Alignment specific options
  # Alignment configuration options
  # enable-sort, enable-map-align and enable-map-align-output set to true by coercion
  alignment_options:
    label: alignment options
    doc: |
      Specifies the alignment options
    type:
      - { "$import": "../../dragen-wgts-alignment-options/4.4.0/dragen-wgts-alignment-options__4.4.0.yaml#dragen-wgts-alignment-options" }

  # Standard vc options
  snv_variant_caller_options:
    label: snv variant calling options
    doc: |
      Specifies the snv variant caller options.
    type:
      - {"$import": "../../dragen-snv-variant-caller-options/4.4.0/dragen-snv-variant-caller-options__4.4.0.yaml#dragen-snv-variant-caller-options"}

  # RNA Specific Variant Calling options
  gene_fusion_detection_options:
    label: gene fusion detection options
    doc: |
      Options relating to rna gene fusion detection
    type:
      - {"$import": "../../dragen-rna-gene-fusion-detection-options/4.4.0/dragen-rna-gene-fusion-detection-options__4.4.0.yaml#dragen-rna-gene-fusion-detection-options"}
  gene_expression_quantification_options:
    label: gene expression quantification options
    doc: |
      Options relating to rna gene expression quantification
    type:
      - {"$import": "../../dragen-rna-gene-expression-quantification-options/4.4.0/dragen-rna-gene-expression-quantification-options__4.4.0.yaml#dragen-rna-gene-expression-quantification-options"}
  splice_variant_caller_options:
    label: splice variant caller options
    doc: |
      Options relating to rna splice variant calling
    type:
      - {"$import": "../../dragen-rna-splice-variant-caller-options/4.4.0/dragen-rna-splice-variant-caller-options__4.4.0.yaml#dragen-rna-splice-variant-caller-options"}

  # MAF Conversion Options
  maf_conversion_options:
    label: maf conversion options
    doc: |
      Specifies the MAF conversion options
    type:
      - "null"
      - {"$import": "../../dragen-maf-conversion-options/4.4.0/dragen-maf-conversion-options__4.4.0.yaml#dragen-maf-conversion-options"}

  # Nirvana Annotation Options
  nirvana_annotation_options:
    label: nirvana annotation options
    doc: |
      Specifies the Nirvana annotation options
    type:
      - "null"
      - {"$import": "../../dragen-nirvana-annotation-options/4.4.0/dragen-nirvana-annotation-options__4.4.0.yaml#dragen-nirvana-annotation-options"}