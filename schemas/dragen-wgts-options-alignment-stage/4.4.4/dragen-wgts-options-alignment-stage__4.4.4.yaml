type: record
name: dragen-wgts-options-alignment-stage
fields:
  # Data inputs
  sequence_data:
    label: sequence data
    doc: |
      The sequence data to be aligned and called variants on.
      This can either be a bam file, cram file or a list of fastq list row objects
    type:
      - {"$import": "../../../schemas/fastq-list-rows-input/2.0.0/fastq-list-rows-input__2.0.0.yaml#fastq-list-rows-input"}
      - {"$import": "../../../schemas/bam-input/1.0.0/bam-input__1.0.0.yaml#bam-input"}
      - {"$import": "../../../schemas/cram-input/1.0.0/cram-input__1.0.0.yaml#cram-input"}
  # Reference
  ref_tar:
    label: ref tar
    doc: |
      Specifies the tarball containing the reference hash table. If the reference is not already loaded into the DRAGEN card, the option automatically loads the reference.
      Note that the actual dragen command is '--ref-dir' but we first need to download and extract the tarball.
    type: File

  # ORA Reference
  ora_reference:
    label: ora reference
    doc: |
      The ora reference to use for decompression of fastq files.
    type:
      - "null"
      - File

  # Stage options (we have to duplicate this across all dragen stages at the top level)
  output_directory:
    label: output directory
    doc: |
      Specifies the output directory.
    type: string
  output_file_prefix:
    label: output file prefix
    doc: |
      Outputs file name prefix to use for all files generated by the pipeline.
    type: string
  lic_instance_id_location:
    label: lic instance id location
    doc: |
      Use this option to override the default cloud instance ID location
    type:
      - "null"
      - string
      - File

  # Is this an RNA Sample?
  enable_rna:
    label: enable rna
    doc: |
      Specifies whether the sample is RNA or DNA. This option is used to determine the alignment algorithm to use.
      If set to true, the sample is treated as RNA and the appropriate alignment algorithm is used.
    type:
      - "null"
      - boolean

  # Alignment specific options
  # Alignment configuration options
  # enable-sort, enable-map-align and enable-map-align-output set to true by coercion
  alignment_options:
    label: alignment options
    doc: |
      Specifies the alignment options
    type:
      - { "$import": "../../dragen-wgts-alignment-options/4.4.4/dragen-wgts-alignment-options__4.4.4.yaml#dragen-wgts-alignment-options" }
