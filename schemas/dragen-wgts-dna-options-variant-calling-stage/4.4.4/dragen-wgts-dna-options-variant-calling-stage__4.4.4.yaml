type: record
name: dragen-wgts-dna-options-variant-calling-stage
fields:
  # Data inputs
  alignment_data:
    label: alignment data
    doc: |
      The data from the alignment stage
    type:
      - {"$import": "../../../schemas/bam-input/1.0.0/bam-input__1.0.0.yaml#bam-input"}
      - {"$import": "../../../schemas/cram-input/1.0.0/cram-input__1.0.0.yaml#cram-input"}
  tumor_alignment_data:
    label: tumor alignment data
    doc: |
      The data from the tumor alignment stage (optional)
    type:
      - "null"
      - {"$import": "../../../schemas/bam-input/1.0.0/bam-input__1.0.0.yaml#bam-input"}
      - {"$import": "../../../schemas/cram-input/1.0.0/cram-input__1.0.0.yaml#cram-input"}
  ref_tar:
    label: ref tar
    doc: |
      Specifies the tarball containing the reference hash table. If the reference is not already loaded into the DRAGEN card, the option automatically loads the reference.
      Note that the actual dragen command is '--ref-dir' but we first need to download and extract the tarball.
    type: File

  # Stage options (we have to duplicate this across all dragen stages at the top level)
  output_directory:
    label: output directory
    doc: |
      Specifies the output directory.
    type: string
  output_file_prefix:
    label: output file prefix
    doc: |
      Outputs file name prefix to use for all files generated by the pipeline.
    type: string
  lic_instance_id_location:
    label: lic instance id location
    doc: |
      Use this option to override the default cloud instance ID location
    type:
      - "null"
      - string
      - File

  # variant-calling specific options
  # variant-calling configuration options
  # enable-sort, enable-map-align and enable-map-align-output set to true by coercion
  snv_variant_caller_options:
    label: snv variant calling options
    doc: |
      Specifies the snv variant caller options.
    type:
      - {"$import": "../../dragen-snv-variant-caller-options/4.4.4/dragen-snv-variant-caller-options__4.4.4.yaml#dragen-snv-variant-caller-options"}
  
  # CNV Caller Options
  cnv_caller_options:
    label: cnv caller options
    doc: |
      Specifies the CNV caller options
    type:
      - "null"
      - {"$import": "../../dragen-cnv-caller-options/4.4.4/dragen-cnv-caller-options__4.4.4.yaml#dragen-cnv-caller-options"}

  # MAF Conversion Options
  maf_conversion_options:
    label: maf conversion options
    doc: |
      Specifies the MAF conversion options
    type:
      - "null"
      - {"$import": "../../dragen-maf-conversion-options/4.4.4/dragen-maf-conversion-options__4.4.4.yaml#dragen-maf-conversion-options"}

  # SV Caller Options
  sv_caller_options:
    label: sv caller options
    doc: |
      Specifies the SV caller options
    type:
      - {"$import": "../../dragen-sv-caller-options/4.4.4/dragen-sv-caller-options__4.4.4.yaml#dragen-sv-caller-options"}

  # Nirvana Annotation Options
  nirvana_annotation_options:
    label: nirvana annotation options
    doc: |
      Specifies the Nirvana annotation options
    type:
      - "null"
      - {"$import": "../../dragen-nirvana-annotation-options/4.4.4/dragen-nirvana-annotation-options__4.4.4.yaml#dragen-nirvana-annotation-options"}

  # Targeted Caller Options
  targeted_caller_options:
    label: targeted caller options
    doc: |
      Specifies the targeted caller options
    type:
      - "null"
      - {"$import": "../../dragen-targeted-caller-options/4.4.4/dragen-targeted-caller-options__4.4.4.yaml#dragen-targeted-caller-options"}