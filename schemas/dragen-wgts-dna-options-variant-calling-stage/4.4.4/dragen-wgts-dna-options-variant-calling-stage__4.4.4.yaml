type: record
name: dragen-wgts-dna-options-variant-calling-stage
fields:
  # Naming inputs
  sample_name:
    label: sample name
    doc: |
      The sample name to use for the variant calling.
    type: string
  tumor_sample_name:
    label: tumor sample name
    doc: |
      The tumor sample name to use for the variant calling.
    type:
      - "null"
      - string
  # Data inputs
  sequence_data:
    label: sequence data
    doc: |
      The sequence data to be aligned and called variants on.
      This can either be a bam file, cram file or a list of fastq list row objects
    type:
      - {"$import": "../../fastq-list-rows-input/2.0.0/fastq-list-rows-input__2.0.0.yaml#fastq-list-rows-input"}
      - {"$import": "../../bam-input/1.0.0/bam-input__1.0.0.yaml#bam-input"}
      - {"$import": "../../cram-input/1.0.0/cram-input__1.0.0.yaml#cram-input"}

  tumor_sequence_data:
    label: sequence data
    doc: |
      The sequence data to be aligned and called variants on.
      This can either be a bam file, cram file or a list of fastq list row objects
    type:
      - "null"
      - {"$import": "../../fastq-list-rows-input/2.0.0/fastq-list-rows-input__2.0.0.yaml#fastq-list-rows-input"}
      - {"$import": "../../bam-input/1.0.0/bam-input__1.0.0.yaml#bam-input"}
      - {"$import": "../../cram-input/1.0.0/cram-input__1.0.0.yaml#cram-input"}
  ref_tar:
    label: ref tar
    doc: |
      Specifies the tarball containing the reference hash table. If the reference is not already loaded into the DRAGEN card, the option automatically loads the reference.
      Note that the actual dragen command is '--ref-dir' but we first need to download and extract the tarball.
    type: File

  ora_reference:
    label: ora reference
    doc: |
      Required if the primary data is in ORA format
    type:
      - "null"
      - File

  # Stage options (we have to duplicate this across all dragen stages at the top level)
  output_directory:
    label: output directory
    doc: |
      Specifies the output directory.
    type: string
  output_file_prefix:
    label: output file prefix
    doc: |
      Outputs file name prefix to use for all files generated by the pipeline.
    type: string
  lic_instance_id_location:
    label: lic instance id location
    doc: |
      Use this option to override the default cloud instance ID location
    type:
      - "null"
      - string
      - File

  # Alignment specific options
  # enable-sort, enable-map-align and enable-map-align-output set to true by coercion
  alignment_options:
    label: alignment options
    doc: |
      Specifies the alignment options
    type:
      - { "$import": "../../dragen-wgts-alignment-options/4.4.4/dragen-wgts-alignment-options__4.4.4.yaml#dragen-wgts-alignment-options" }

  # variant-calling specific options
  # variant-calling configuration options
  snv_variant_caller_options:
    label: snv variant calling options
    doc: |
      Specifies the snv variant caller options.
    type:
      - {"$import": "../../dragen-snv-variant-caller-options/4.4.4/dragen-snv-variant-caller-options__4.4.4.yaml#dragen-snv-variant-caller-options"}
  
  # CNV Caller Options
  cnv_caller_options:
    label: cnv caller options
    doc: |
      Specifies the CNV caller options
    type:
      - "null"
      - {"$import": "../../dragen-cnv-caller-options/4.4.4/dragen-cnv-caller-options__4.4.4.yaml#dragen-cnv-caller-options"}

  # MAF Conversion Options
  maf_conversion_options:
    label: maf conversion options
    doc: |
      Specifies the MAF conversion options
    type:
      - "null"
      - {"$import": "../../dragen-maf-conversion-options/4.4.4/dragen-maf-conversion-options__4.4.4.yaml#dragen-maf-conversion-options"}

  # SV Caller Options
  sv_caller_options:
    label: sv caller options
    doc: |
      Specifies the SV caller options
    type:
      - {"$import": "../../dragen-sv-caller-options/4.4.4/dragen-sv-caller-options__4.4.4.yaml#dragen-sv-caller-options"}

  # Nirvana Annotation Options
  nirvana_annotation_options:
    label: nirvana annotation options
    doc: |
      Specifies the Nirvana annotation options
    type:
      - "null"
      - {"$import": "../../dragen-nirvana-annotation-options/4.4.4/dragen-nirvana-annotation-options__4.4.4.yaml#dragen-nirvana-annotation-options"}

  # Targeted Caller Options
  targeted_caller_options:
    label: targeted caller options
    doc: |
      Specifies the targeted caller options
    type:
      - "null"
      - {"$import": "../../dragen-targeted-caller-options/4.4.4/dragen-targeted-caller-options__4.4.4.yaml#dragen-targeted-caller-options"}

  # MRJD Options
  mrjd_options:
    label: mrjd options
    doc: |
      Specifies the mrjd options
    type:
      - "null"
      - {"$import": "../../dragen-mrjd-options/4.4.4/dragen-mrjd-options__4.4.4.yaml#dragen-mrjd-options"}

  # TMB Options
  tmb_options:
    label: tmb options
    doc: |
      Specifies the tmb options
    type:
      - "null"
      - {"$import": "../../dragen-tmb-options/4.4.4/dragen-tmb-options__4.4.4.yaml#dragen-tmb-options"}

  # MSI Optional
  msi_options:
    label: msi options
    doc: |
      Specifies the msi options
    type:
      - "null"
      - {"$import": "../../dragen-msi-options/4.4.4/dragen-msi-options__4.4.4.yaml#dragen-msi-options"}